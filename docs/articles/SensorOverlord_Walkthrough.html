<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SensorOverlord Walkthrough • sensorOverlord</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SensorOverlord Walkthrough">
<meta property="og:description" content="sensorOverlord">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensorOverlord</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/SensorOverlord_Walkthrough.html">SensorOverlord Walkthrough</a>
    </li>
    <li>
      <a href="../articles/accessing-database.html">Accessing and Manipulating the Database</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="SensorOverlord_Walkthrough_files/header-attrs-2.3/header-attrs.js"></script><script src="SensorOverlord_Walkthrough_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SensorOverlord Walkthrough</h1>
            
      
      
      <div class="hidden name"><code>SensorOverlord_Walkthrough.Rmd</code></div>

    </div>

    
    
<div id="purpose-and-audience" class="section level2">
<h2 class="hasAnchor">
<a href="#purpose-and-audience" class="anchor"></a>Purpose and Audience</h2>
<p>This short tutorial is intended for microscopists who have:</p>
<ul>
<li><p>A basic knowledge of R,</p></li>
<li><p>access to ratiometric images in their experimental system of interest, and</p></li>
<li><p>an interest in making accurate, quantitative measurements of <span class="math inline">\(E_{GSH}\)</span>, pH, or the concentration of a ligand.</p></li>
</ul>
</div>
<div id="obtaining-pre-requisities" class="section level2">
<h2 class="hasAnchor">
<a href="#obtaining-pre-requisities" class="anchor"></a>Obtaining Pre-requisities</h2>
<div id="installing-the-sensoroverlord-package" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-the-sensoroverlord-package" class="anchor"></a>Installing the sensorOverlord Package</h3>
<p>The sensorOverlord package is available on GitHub. You can install it in R via the <code>devtools</code> package. To install the <code>devtools</code> package, run <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("devtools")</a></code>.</p>
<p>To install the most recent version of the sensorOverlord package from GitHub:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"apfeldlab/sensoroverlord"</span>)</pre></body></html></div>
<p>You can confirm your installation of <code>sensorOverlord</code> with <code>packageVersion</code>:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span>(<span class="st">"sensorOverlord"</span>)
<span class="co">#&gt; [1] '0.2.0'</span></pre></body></html></div>
</div>
<div id="obtaining-sensor-biochemical-and-biophysical-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#obtaining-sensor-biochemical-and-biophysical-parameters" class="anchor"></a>Obtaining Sensor Biochemical and Biophysical Parameters</h3>
<div id="biochemical-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#biochemical-parameters" class="anchor"></a>1. Biochemical parameters</h4>
<p>To use the SensorOverlord framework, you need to have access to a midpoint potential for your sensor.</p>
<p>For redox sensors, the midpoint potential is <span class="math inline">\(E_0\)</span>. For pH sensors, the midpoint potential is <span class="math inline">\(pKa\)</span>. For ligand-binding sensors, the midpoint is <span class="math inline">\(pKd\)</span>.</p>
<p>The value of these midpoint potentials are almost always reported in the paper in which the sensor of interest was first published.</p>
<p>Note that, for ligand-binding sensors, papers often report <span class="math inline">\(Kd\)</span>. <span class="math inline">\(pKd = -log_{10}(Kd)\)</span> so, to convert <span class="math inline">\(Kd\)</span> to <span class="math inline">\(pKd\)</span>, use the <code>log10</code> function:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">kD</span> <span class="kw">&lt;-</span> <span class="fl">5</span>*<span class="fl">10e-6</span>
<span class="no">pKd</span> <span class="kw">&lt;-</span> -<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="no">kD</span>)</pre></body></html></div>
</div>
<div id="biophysical-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#biophysical-parameters" class="anchor"></a>2. Biophysical parameters</h4>
<p>sensorOverlord requires as input:</p>
<ol style="list-style-type: decimal">
<li>
<span class="math inline">\(R_A\)</span>: The ratio measurement of the sensor in State A. We also assume that State A is the state in which you have the <em>lowest</em> ratio measurement, so this is sometimes also called <span class="math inline">\(R_{min}\)</span>.</li>
<li>
<span class="math inline">\(R_B\)</span>: The ratio measurement of the sensor in State B. Sometimes also called <span class="math inline">\(R_{max}\)</span>.</li>
<li>
<span class="math inline">\(\delta_{\lambda2}\)</span>: The distribution of the dynamic range in the second wavelength. This can be derived from the dynamic range of the sensor in both states.</li>
</ol>
<p>You can obtain these parameters in one of three ways:</p>
<ol style="list-style-type: decimal">
<li><p>Upload a digitized spectra. <code>sensorOverlord</code> can programatically obtain these input values from a digitized spectra.</p></li>
<li><p>Use a provided spectra. We have created a MongoDB database containing many the spectra of many published redox, pH, and ligand-binding sensors.</p></li>
<li><p>Provide the parameters directly. These parameters can be measured empirically, as explained in <a href="https://www.nature.com/articles/ncomms6020">Romero 2014</a>.</p></li>
</ol>
<p><strong>Option 1: Upload a digitized spectra</strong></p>
<p>If you have excitation-emission spectra data for your each of your sensor’s two states, you can upload those into R.</p>
<p>For example, you could have a .csv file with three columns:</p>
<ul>
<li>lambda: The wavelength of the excitation or emission.</li>
<li>values_A: The intensity value of the sensor’s output in state A.</li>
<li>values_B: The intensity value of the sensor’s output in state B.</li>
</ul>
<p>Oftentimes with digitized spectra, the <span class="math inline">\(\lambda\)</span> values recorded in states A and B are not identical. In that case, you can use a .csv file with four columns:</p>
<ul>
<li>lambda_A: The wavelengths recorded in state A.</li>
<li>values_A: The intensity value of the sensor’s output in state A.</li>
<li>lambda_B: The wavelengths recorded in state B.</li>
<li>values_B: The intensity value of the sensor’s output in state B.</li>
</ul>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">spectra</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="st">"my_spectra.csv"</span>)</pre></body></html></div>
<p>Once you have uploaded your spectra, you can use the <code><a href="../reference/spectraMatrixFromValues-function.html">sensorOverlord::spectraMatrixFromValues</a></code> function to create a <code>Spectra</code> object:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">spectra_object</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/spectraMatrixFromValues-function.html">spectraMatrixFromValues</a></span>(
  <span class="kw">lambdas_minimum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">lambda</span>,
  <span class="kw">values_minimum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">values_A</span>,
  <span class="kw">lambdas_maximum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">lambda</span>,
  <span class="kw">values_maximum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">values_B</span>
)</pre></body></html></div>
<p>or</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">spectra_object</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/spectraMatrixFromValues-function.html">spectraMatrixFromValues</a></span>(
  <span class="kw">lambdas_minimum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">lambda_A</span>,
  <span class="kw">values_minimum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">values_A</span>,
  <span class="kw">lambdas_maximum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">lambda_B</span>,
  <span class="kw">values_maximum</span> <span class="kw">=</span> <span class="no">spectra</span>$<span class="no">values_B</span>
)</pre></body></html></div>
<p>You can use the <code><a href="../reference/newSensorFromSpectra-function.html">newSensorFromSpectra()</a></code> function to turn the spectra object into a sensor object at a certain ratiometric wavelength pair:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">sensor_object</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/newSensorFromSpectra-function.html">newSensorFromSpectra</a></span>(<span class="no">spectra_object</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">510</span>, <span class="fl">520</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">455</span>, <span class="fl">465</span>))</pre></body></html></div>
<p>That sensor object will now contain estimates for the three required parameters:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">Ra</span> <span class="kw">&lt;-</span> <span class="no">sensor_object</span>@<span class="kw">Rmin</span>
<span class="no">Rb</span> <span class="kw">&lt;-</span> <span class="no">sensor_object</span>@<span class="kw">Rmax</span>
<span class="no">delta2</span> <span class="kw">&lt;-</span> <span class="no">sensor_object</span>@<span class="kw">delta</span></pre></body></html></div>
<p><strong>Option 2: Use a Provided Spectra</strong></p>
<p>You can access all sensor information from the database with <code>sensorOverlord::getDb()$find()</code>, which accepts JSON search queries. For more information, see the “Accessing and Manipulating the Database” vignette. For example:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">deGFP1_information</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/getDb.html">getDb</a></span>()$<span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">find</a></span>(<span class="st">'{"sensor_name" : "deGFP1"}'</span>)
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">deGFP1_information</span>$<span class="no">sensor_readout</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] "emission ratiometric"</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">deGFP1_information</span>$<span class="no">sensor_midpoint</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] 8.02</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">deGFP1_information</span>$<span class="no">lambda1_recommended</span>)
<span class="co">#&gt; [1] 515</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">deGFP1_information</span>$<span class="no">lambda2_recommended</span>)
<span class="co">#&gt; [1] 460</span></pre></body></html></div>
<p>The actual spectra information is in a list form, so you can use the <code>apply</code> and <code>unlist</code> functions to obtain the spectra:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">data.table</span>)
<span class="no">deGFP1_spectra_information</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span>(
    <span class="no">deGFP1_information</span>[<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"lambda_min"</span>, <span class="st">"values_min"</span>, <span class="st">"lambda_max"</span>, <span class="st">"values_max"</span>)],
    <span class="fl">2</span>, <span class="kw">function</span>(<span class="no">x</span>) <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">x</span>))
  )</pre></body></html></div>
<p>Then, you can follow the same instructions as if you had provided the spectra yourself: create a spectra object, then a sensor object at a specific wavelength pair, and then extract the relevant parameters:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">deGFP_spectra</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/spectraMatrixFromValues-function.html">spectraMatrixFromValues</a></span>(<span class="no">deGFP1_spectra_information</span>$<span class="no">lambda_min</span>,
                                                         <span class="no">deGFP1_spectra_information</span>$<span class="no">values_min</span>,
                                                         <span class="no">deGFP1_spectra_information</span>$<span class="no">lambda_max</span>,
                                                         <span class="no">deGFP1_spectra_information</span>$<span class="no">values_max</span>)

<span class="no">sensor_object</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/newSensorFromSpectra-function.html">newSensorFromSpectra</a></span>(<span class="no">deGFP_spectra</span>,
                                     <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">510</span>, <span class="fl">520</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">455</span>, <span class="fl">465</span>))

<span class="no">Ra</span> <span class="kw">&lt;-</span> <span class="no">sensor_object</span>@<span class="kw">Rmin</span>
<span class="no">Rb</span> <span class="kw">&lt;-</span> <span class="no">sensor_object</span>@<span class="kw">Rmax</span>
<span class="no">delta2</span> <span class="kw">&lt;-</span> <span class="no">sensor_object</span>@<span class="kw">delta</span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">Ra</span>)
<span class="co">#&gt; [1] 0.3330232</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">Rb</span>)
<span class="co">#&gt; [1] 0.6447556</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">delta2</span>)
<span class="co">#&gt; [1] 0.9611258</span></pre></body></html></div>
<p><strong>Option 3: Provide Parameters Directly</strong></p>
<p>If you conducted the appropriate microscopy experiments, you may have also obtained exact values of <span class="math inline">\(R_a\)</span>, <span class="math inline">\(R_b\)</span>, and <span class="math inline">\(\delta_{\lambda2}\)</span>.</p>
<p>If that’s the case, you can use them to directly make a sensor object:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">R_reduced</span> <span class="kw">&lt;-</span> <span class="fl">0.6</span>
<span class="no">R_oxidized</span> <span class="kw">&lt;-</span> <span class="fl">5.2</span>
<span class="no">delta2</span> <span class="kw">&lt;-</span> <span class="fl">0.171</span>

<span class="no">sensor_object</span> <span class="kw">&lt;-</span> <span class="fu">new</span>(
            <span class="st">"Sensor"</span>,
            <span class="kw">Rmax</span> <span class="kw">=</span> <span class="no">R_reduced</span>,
            <span class="kw">Rmin</span> <span class="kw">=</span> <span class="no">R_oxidized</span>,
            <span class="kw">delta</span> <span class="kw">=</span> <span class="no">delta2</span>
        )</pre></body></html></div>
</div>
</div>
<div id="estimating-microscopy-error" class="section level3">
<h3 class="hasAnchor">
<a href="#estimating-microscopy-error" class="anchor"></a>Estimating Microscopy Error</h3>
<p>In order to use the SensorOverlord framework, you need to have an estimate of the variability of your measurement of <span class="math inline">\(R\)</span> in your system of interest.</p>
<p>There are various ways to accomplish this, as we detail in the Supplementary Information of the associated manuscript.</p>
<p>For example, you can simply plot the <span class="math inline">\(R\)</span> values that you observed in a previous experiment in which you expected the <span class="math inline">\(R\)</span> value to stay constant over some period of time. Then, you can estimate your error in <span class="math inline">\(R\)</span> by looking at the standard error over that period.</p>
<p>In C. elegans, we find that the error is constant, but relative to the <span class="math inline">\(R\)</span> value.</p>
<p>SensorOverlord can accommodate any error model that you find in your system. For example:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="co"># Relative error of 2.8%, or 0.028*R</span>
<span class="no">error_relative</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">x</span>) <span class="no">x</span>*<span class="fl">0.028</span>

<span class="co"># Absolute error of +/- 0.028 </span>
<span class="no">error_absolute</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">x</span>) <span class="fl">0.028</span>

<span class="co"># Quadratic error</span>
<span class="no">error_other</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">x</span>) <span class="fl">0.0001</span> * <span class="no">x</span>^<span class="fl">2</span> + <span class="fl">0.028</span>*<span class="no">x</span> + <span class="fl">0.5</span></pre></body></html></div>
<p>For more information about incorporating different error models, see the “Customizing Error Model” vignette. For now, this tutorial will assume that you are using a <em>relative</em> error.</p>
</div>
</div>
<div id="running-the-sensoroverlord-model" class="section level2">
<h2 class="hasAnchor">
<a href="#running-the-sensoroverlord-model" class="anchor"></a>Running the SensorOverlord model</h2>
<p>After completing the pre-requisites, you should have access to a sensor object and an error model. E.g.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">sensor_object</span> <span class="kw">&lt;-</span> <span class="fu">new</span>(
            <span class="st">"Sensor"</span>,
            <span class="kw">Rmax</span> <span class="kw">=</span> <span class="no">R_reduced</span>,
            <span class="kw">Rmin</span> <span class="kw">=</span> <span class="no">R_oxidized</span>,
            <span class="kw">delta</span> <span class="kw">=</span> <span class="no">delta2</span>
        )

<span class="no">my_error</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">x</span>) <span class="no">x</span>*<span class="fl">0.028</span></pre></body></html></div>
<p>`</p>
<p>First, you’ll need to turn your generic sensor object into a specific redox, pH, or ligand-binding sensor. For example:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">redox_sensor_object</span> <span class="kw">&lt;-</span>
  <span class="fu">new</span>(
    <span class="st">"redoxSensor"</span>,
    <span class="no">sensor_object</span>,
    <span class="kw">e0</span> <span class="kw">=</span> -<span class="fl">265</span>
  )</pre></body></html></div>
<p>Then, you can use the <code>error_df()</code> method, defined on redoxSensor, pHSensor, and ligandSensor objects, to get a table of the inaccuracy of the sensor at different values of redox potential, pH, or p[Ligand].</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">redox_sensor_error</span> <span class="kw">&lt;-</span> <span class="fu">error_df</span>(
  <span class="no">redox_sensor_object</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.028</span>),
  <span class="kw">Emin</span> <span class="kw">=</span> -<span class="fl">300</span>,
  <span class="kw">Emax</span> <span class="kw">=</span> -<span class="fl">150</span>
)

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">redox_sensor_error</span>)
<span class="co">#&gt;        E              Error          Inaccuracy            Rmin          </span>
<span class="co">#&gt;  Min.   :-300.0   Min.   : 0.7329   Length:15001       Length:15001      </span>
<span class="co">#&gt;  1st Qu.:-262.5   1st Qu.: 1.1032   Class :character   Class :character  </span>
<span class="co">#&gt;  Median :-225.0   Median : 3.4355   Mode  :character   Mode  :character  </span>
<span class="co">#&gt;  Mean   :-225.0   Mean   :    Inf                                        </span>
<span class="co">#&gt;  3rd Qu.:-187.5   3rd Qu.:31.3965                                        </span>
<span class="co">#&gt;  Max.   :-150.0   Max.   :    Inf                                        </span>
<span class="co">#&gt;      Rmax               Name          </span>
<span class="co">#&gt;  Length:15001       Length:15001      </span>
<span class="co">#&gt;  Class :character   Class :character  </span>
<span class="co">#&gt;  Mode  :character   Mode  :character  </span>
<span class="co">#&gt;                                       </span>
<span class="co">#&gt;                                       </span>
<span class="co">#&gt; </span></pre></body></html></div>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">redox_sensor_error</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">E</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">Error</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">10</span>))</pre></body></html></div>
<p><img src="SensorOverlord_Walkthrough_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>For more information, see <code>?error_df,redoxSensor-method</code>, or the method for your type of sensor.</p>
<p>You can export that table directly, or use it for further analysis.</p>
<p><code>sensorOverlord</code> can also compute the ranges of redox potential, pH, or ligand concentration that a sensor can measure to different accuracy thresholds:</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="co"># The redox potentials this sensor can measure, with an error in R of </span>
<span class="co"># 2% or 3%, to an accuracy of 1mV or 2mV</span>
<span class="no">accurate_ranges</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/ranges_df.html">ranges_df</a></span>(<span class="no">redox_sensor_object</span>,
                                  <span class="kw">inaccuracies</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.02</span>, <span class="fl">0.03</span>),
                                  <span class="kw">thresholds</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>))

<span class="no">accurate_ranges</span>
<span class="co">#&gt;   Sensor_Name Minimum Maximum Inaccuracy error_thresh</span>
<span class="co">#&gt; 1 Sensor_0.02 -252.89 -205.11       0.02            1</span>
<span class="co">#&gt; 2 Sensor_0.02 -264.09 -200.00       0.02            2</span>
<span class="co">#&gt; 3 Sensor_0.03 -243.66 -214.85       0.03            1</span>
<span class="co">#&gt; 4 Sensor_0.03 -257.68 -200.44       0.03            2</span></pre></body></html></div>
<p><code>sensorOverlord</code> also provides some default plotting methods that work for all sensor objects.</p>
<p><code>plotProperty</code> will plot <span class="math inline">\(R\)</span> vs the property of interest For example, for redox sensors, this will be <span class="math inline">\(R\)</span> vs <span class="math inline">\(E_{GSH}\)</span>, the fraction of sensors in the oxidized state.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu">plotProperty</span>(<span class="no">redox_sensor_object</span>)
<span class="co">#&gt; Warning in log((object@delta * object@Rmax - object@delta * R)/(R -</span>
<span class="co">#&gt; object@Rmin)): NaNs produced</span>
<span class="co">#&gt; Warning: Removed 1 row(s) containing missing values (geom_path).</span></pre></body></html></div>
<p><img src="SensorOverlord_Walkthrough_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p><code>rangePlot</code> will plot the range of values a sensor can measure to a certain accuracy.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu">rangePlot</span>(<span class="no">redox_sensor_object</span>, <span class="kw">ranges</span> <span class="kw">=</span> <span class="no">accurate_ranges</span>)</pre></body></html></div>
<p><img src="SensorOverlord_Walkthrough_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>In the plot above, notice how the range of values the sensor can measure accurately expands when the error in R is 2% (“Sensor_0.02”) versus when the error in 3% (“Sensor_0.03”).</p>
<p>For more information on plotting methods, see the “Sensor Methods” section in <a href="https://apfeldlab.github.io/SensorOverlord/reference/index.html">the documentation reference</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Julian Stanley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
